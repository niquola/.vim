#!/usr/bin/env ruby
require 'fileutils'

VIM_ROOT= File.join(File.dirname(__FILE__),'..')
puts VIM_ROOT

desc "reset and update all dirs"
task :update do
  include FileUtils
  puts "reset and update all dirs"
  Dir['*'].each do |dir|
    if File.directory? dir
    puts "=== #{dir} ==="
    cd(dir) { puts `git reset --hard && git pull origin` } 
    end
  end
end

CUSTOM_INSTALLATORS=['lusty']

desc "install all"
task :install do
  Dir['*'].each do |dir|
    if File.directory?(dir) and !CUSTOM_INSTALLATORS.include?(dir)
    puts "=== #{dir} ==="
    cd(dir) {
      Dir['*'].each do |vim_file|
       cp_r vim_file, VIM_ROOT,:verbose=>true
      end
     } 
    end
  end
  
  cd('lusty'){
     ['lusty-explorer.vim'].each do |vim_file|
       cp_r vim_file, File.join(VIM_ROOT,'plugin'),:verbose=>true
     end
  }
end

